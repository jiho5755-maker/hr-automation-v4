# 🔥 문제 해결 가이드

## 🎯 진단 결과: **모든 시스템이 정상 작동 중입니다!**

```
✅ 포트 8000: 통합 대시보드 - HTTP 200 OK
✅ 포트 8501: 출산육아 자동화 - HTTP 200 OK
✅ 포트 8502: 연말정산 자동화 - HTTP 200 OK
✅ 포트 8503: 재택근무 관리 - HTTP 200 OK

✅ 데이터베이스: hr_master.db 정상 작동
✅ 인증 시스템: authenticate_user() 정상 작동
✅ 사용자 계정: admin/test 모두 활성화
```

---

## 🤔 "접속이 안 된다"는 현상 - 가능한 원인들

### 1️⃣ **브라우저 캐시/쿠키 문제**

#### 해결 방법:
```bash
# Chrome에서:
Cmd + Shift + Delete → 캐시/쿠키 삭제

# 또는 강력 새로고침:
Cmd + Shift + R (Mac)
Ctrl + Shift + R (Windows)
```

#### 시크릿/프라이빗 모드로 테스트:
```bash
Chrome: Cmd + Shift + N
Safari: Cmd + Shift + N
Firefox: Cmd + Shift + P
```

---

### 2️⃣ **잘못된 URL 접속**

#### ❌ 잘못된 접속:
```
http://localhost:8000/  (마지막 슬래시)
https://localhost:8000   (https - SSL 없음)
http://0.0.0.0:8000     (잘못된 호스트)
```

#### ✅ 올바른 접속:
```
http://localhost:8000
http://127.0.0.1:8000
http://192.168.0.59:8000
```

---

### 3️⃣ **Streamlit이 무한 로딩 중**

#### 증상:
- 브라우저에서 빙글빙글 로딩만 계속됨
- "Please wait..." 메시지 계속 표시

#### 해결 방법:
```bash
# 1. 모든 Streamlit 프로세스 종료
pkill -f streamlit

# 2. 통합 대시보드만 재시작
cd /Users/jangjiho/Documents/인사팀_자동화_마스터/0_통합_대시보드
python3 -m streamlit run app.py --server.port 8000 --server.address localhost

# 3. 브라우저에서 다시 접속
open http://localhost:8000
```

---

### 4️⃣ **WebSocket 연결 실패**

Streamlit은 WebSocket을 사용합니다. 네트워크 설정이나 프록시가 WebSocket을 차단할 수 있습니다.

#### 확인 방법:
브라우저 개발자 도구(F12) → Console 탭 확인

#### 오류 메시지 예시:
```
WebSocket connection to 'ws://localhost:8000/_stcore/stream' failed
```

#### 해결 방법:
```bash
# Streamlit 재시작 시 더 안정적인 설정 사용
cd /Users/jangjiho/Documents/인사팀_자동화_마스터/0_통합_대시보드

python3 -m streamlit run app.py \
  --server.port 8000 \
  --server.address localhost \
  --server.headless true \
  --browser.serverAddress localhost \
  --browser.gatherUsageStats false
```

---

### 5️⃣ **포트 충돌 (이미 사용 중)**

#### 확인:
```bash
lsof -i :8000
```

#### 해결:
```bash
# 해당 프로세스 종료
kill -9 <PID>

# 또는 다른 포트 사용
python3 -m streamlit run app.py --server.port 8888
```

---

### 6️⃣ **방화벽 차단**

#### macOS 방화벽 확인:
```bash
# 방화벽 상태 확인
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate

# 방화벽이 켜져 있다면:
# 시스템 설정 → 보안 및 개인 정보 보호 → 방화벽 → 방화벽 옵션
# Python 허용 확인
```

---

### 7️⃣ **Python 패키지 문제**

#### 재설치:
```bash
# 필수 패키지 재설치
pip3 install --upgrade streamlit pandas requests

# 통합 대시보드 requirements 전체 재설치
cd /Users/jangjiho/Documents/인사팀_자동화_마스터/0_통합_대시보드
pip3 install -r requirements.txt --upgrade
```

---

## 🛠️ 완전 초기화 및 재시작

모든 방법이 실패했다면, 완전히 초기화 후 재시작:

```bash
# 1. 모든 Python/Streamlit 프로세스 종료
pkill -f python
pkill -f streamlit

# 2. 프로젝트 디렉토리로 이동
cd /Users/jangjiho/Documents/인사팀_자동화_마스터

# 3. 데이터베이스 확인
ls -lh hr_master.db

# 4. 통합 대시보드 재시작 (상세 로그 출력)
cd 0_통합_대시보드
python3 -m streamlit run app.py --server.port 8000 --logger.level=debug

# 5. 새 브라우저 창에서 접속
open http://localhost:8000
```

---

## 📱 각 앱별 개별 실행

통합 대시보드가 문제라면 개별 앱으로 테스트:

### 출산육아 자동화 (포트 8501):
```bash
cd /Users/jangjiho/Documents/인사팀_자동화_마스터/1_출산육아_자동화
python3 -m streamlit run app.py
```

### 연말정산 자동화 (포트 8502):
```bash
cd /Users/jangjiho/Documents/인사팀_자동화_마스터/2_연말정산_자동화
python3 -m streamlit run app.py
```

### 재택근무 관리 (포트 8503):
```bash
cd /Users/jangjiho/Documents/인사팀_자동화_마스터/3_재택근무_관리시스템
python3 -m streamlit run app.py
```

---

## 🔍 브라우저 개발자 도구로 디버깅

### Chrome/Edge/Safari:
1. `F12` 또는 `Cmd + Option + I` (Mac)
2. **Console** 탭 → JavaScript 오류 확인
3. **Network** 탭 → 실패한 요청 확인
4. **Application** 탭 → 쿠키/로컬스토리지 삭제

### 확인할 항목:
- ❌ 빨간색 오류 메시지
- ❌ `404 Not Found`
- ❌ `ERR_CONNECTION_REFUSED`
- ❌ `WebSocket connection failed`
- ❌ CORS 오류

---

## 📞 추가 정보 수집

문제가 계속되면 다음 정보를 수집하세요:

```bash
# 1. 시스템 정보
python3 --version
pip3 list | grep streamlit

# 2. 네트워크 상태
netstat -an | grep LISTEN | grep -E "8000|8501|8502|8503"

# 3. 프로세스 상태
ps aux | grep streamlit

# 4. 로그 확인
cd /Users/jangjiho/Documents/인사팀_자동화_마스터/0_통합_대시보드
ls -la *.log

# 5. 연결 테스트
curl -I http://localhost:8000

# 6. 데이터베이스 상태
sqlite3 ../hr_master.db "SELECT COUNT(*) FROM users;"
```

---

## ✅ 빠른 체크리스트

문제 해결 전 체크:

- [ ] 올바른 URL 사용 (`http://localhost:8000`)
- [ ] 브라우저 캐시 삭제 완료
- [ ] Streamlit 프로세스 실행 중 확인 (`ps aux | grep streamlit`)
- [ ] 포트 사용 중 확인 (`lsof -i :8000`)
- [ ] 방화벽 허용 확인
- [ ] 다른 브라우저로 테스트
- [ ] 시크릿 모드로 테스트
- [ ] 개발자 도구 Console 오류 확인

---

## 🆘 긴급 복구

정말 안 되면:

```bash
# 백업에서 복원
cd /Users/jangjiho/Documents/인사팀_자동화_마스터/_backups
# (백업 파일 확인 후 복원)

# 또는 시스템 재초기화
cd /Users/jangjiho/Documents/인사팀_자동화_마스터
python3 scripts/init_system.py
```

---

## 💡 여전히 안 된다면?

1. **스크린샷 공유**: 브라우저에 뭐가 보이는지
2. **오류 메시지 공유**: Console 탭의 빨간 오류
3. **터미널 로그 공유**: Streamlit 실행 시 출력 메시지

---

**마지막 업데이트**: 2026-01-28 00:03  
**진단 결과**: ✅ 시스템 정상, 브라우저/네트워크 이슈 가능성 높음
