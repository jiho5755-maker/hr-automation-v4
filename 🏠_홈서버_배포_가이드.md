# ğŸ  í™ˆì„œë²„ ë°°í¬ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [í˜„ì¬ ë¬¸ì œì ](#í˜„ì¬-ë¬¸ì œì )
2. [í•´ê²° ë°©ì•ˆ ë¹„êµ](#í•´ê²°-ë°©ì•ˆ-ë¹„êµ)
3. [ë°©ì•ˆ 1: ê°œë³„ í¬íŠ¸ ì‹¤í–‰ (ì¦‰ì‹œ ì ìš©)](#ë°©ì•ˆ-1-ê°œë³„-í¬íŠ¸-ì‹¤í–‰)
4. [ë°©ì•ˆ 2: Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ (ê¶Œì¥)](#ë°©ì•ˆ-2-nginx-ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ)
5. [ë°©ì•ˆ 3: Docker Compose (ìµœê³  ì•ˆì •ì„±)](#ë°©ì•ˆ-3-docker-compose)
6. [FAQ](#faq)

---

## ğŸ”´ í˜„ì¬ ë¬¸ì œì 

### ë¬¸ì œ 1: Python í¬ë˜ì‹œ
- **ì¶œì‚°ìœ¡ì•„ í˜ì´ì§€** ì ‘ì† ì‹œ Python í”„ë¡œì„¸ìŠ¤ í¬ë˜ì‹œ
- ì›ì¸: ë³µì¡í•œ `engine.py`, PDF/DOCX ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶©ëŒ
- ì˜í–¥: ì „ì²´ ì•±ì´ ë‹¤ìš´ë˜ì–´ ë‹¤ë¥¸ ëª¨ë“ˆë„ ì‚¬ìš© ë¶ˆê°€

### ë¬¸ì œ 2: ë‹¨ì¼ í¬íŠ¸ í†µí•©ì˜ í•œê³„
- Streamlit ë©€í‹°í˜ì´ì§€ ë°©ì‹ì˜ ë¶ˆì•ˆì •ì„±
- í•˜ë‚˜ì˜ ëª¨ë“ˆ ë¬¸ì œê°€ ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥
- ë””ë²„ê¹… ë° ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

---

## ğŸ’¡ í•´ê²° ë°©ì•ˆ ë¹„êµ

| ë°©ì•ˆ | ë‚œì´ë„ | ì•ˆì •ì„± | í†µí•©ì„± | ê¶Œì¥ë„ |
|------|--------|--------|--------|--------|
| **ê°œë³„ í¬íŠ¸ ì‹¤í–‰** | â­ ì‰¬ì›€ | â­â­â­ | â­â­ | âœ… ì¦‰ì‹œ |
| **Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ** | â­â­ ë³´í†µ | â­â­â­â­ | â­â­â­â­ | âœ…âœ… ê¶Œì¥ |
| **Docker Compose** | â­â­â­ ì–´ë ¤ì›€ | â­â­â­â­â­ | â­â­â­â­â­ | âœ…âœ…âœ… ìµœê³  |

---

## ğŸš€ ë°©ì•ˆ 1: ê°œë³„ í¬íŠ¸ ì‹¤í–‰ (ì¦‰ì‹œ ì ìš©)

### ì¥ì 
- âœ… ì¦‰ì‹œ ì ìš© ê°€ëŠ¥
- âœ… ê° ëª¨ë“ˆ ë…ë¦½ ì‹¤í–‰ â†’ í¬ë˜ì‹œ ê²©ë¦¬
- âœ… ì„¤ì • ë³€ê²½ ë¶ˆí•„ìš”

### ì‹¤í–‰ ë°©ë²•

#### í„°ë¯¸ë„ 1: í†µí•© ëŒ€ì‹œë³´ë“œ
```bash
cd /Users/jangjiho/Documents/ì¸ì‚¬íŒ€_ìë™í™”_ë§ˆìŠ¤í„°
./START_HERE.sh

# ì ‘ì†: http://localhost:8000
```

#### í„°ë¯¸ë„ 2: ì¶œì‚°ìœ¡ì•„ ìë™í™”
```bash
cd /Users/jangjiho/Documents/ì¸ì‚¬íŒ€_ìë™í™”_ë§ˆìŠ¤í„°/1_ì¶œì‚°ìœ¡ì•„_ìë™í™”
streamlit run app.py --server.port 8501

# ì ‘ì†: http://localhost:8501
```

#### í„°ë¯¸ë„ 3: ì¬íƒê·¼ë¬´ ê´€ë¦¬
```bash
cd /Users/jangjiho/Documents/ì¸ì‚¬íŒ€_ìë™í™”_ë§ˆìŠ¤í„°/3_ì¬íƒê·¼ë¬´_ê´€ë¦¬ì‹œìŠ¤í…œ
streamlit run app.py --server.port 8503

# ì ‘ì†: http://localhost:8503
```

#### í„°ë¯¸ë„ 4: ê¸‰ì—¬ê´€ë¦¬ ìë™í™”
```bash
cd /Users/jangjiho/Documents/ì¸ì‚¬íŒ€_ìë™í™”_ë§ˆìŠ¤í„°/5_ê¸‰ì—¬ê´€ë¦¬_ìë™í™”
streamlit run app.py --server.port 8505

# ì ‘ì†: http://localhost:8505
```

### ë‹¨ì 
- âŒ ì—¬ëŸ¬ íƒ­ì„ ì—´ì–´ì•¼ í•¨
- âŒ í¬íŠ¸ ë²ˆí˜¸ ê¸°ì–µ í•„ìš”
- âŒ í„°ë¯¸ë„ 4ê°œ ì‹¤í–‰ í•„ìš”

---

## ğŸŒ ë°©ì•ˆ 2: Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ (ê¶Œì¥)

### ì¥ì 
- âœ… ë‹¨ì¼ ë„ë©”ì¸/í¬íŠ¸ë¡œ ëª¨ë“  ëª¨ë“ˆ ì ‘ê·¼
- âœ… ê° ëª¨ë“ˆ ë…ë¦½ ì‹¤í–‰ ìœ ì§€
- âœ… SSL ì¸ì¦ì„œ ì ìš© ê°€ëŠ¥
- âœ… ë¡œë“œ ë°¸ëŸ°ì‹± ê°€ëŠ¥

### ì•„í‚¤í…ì²˜

```
ì‚¬ìš©ì
  â†“
http://homeserver.local
  â†“
Nginx (í¬íŠ¸ 80)
  â”œâ”€â”€ / â†’ í†µí•© ëŒ€ì‹œë³´ë“œ (í¬íŠ¸ 8000)
  â”œâ”€â”€ /maternity â†’ ì¶œì‚°ìœ¡ì•„ (í¬íŠ¸ 8501)
  â”œâ”€â”€ /remote â†’ ì¬íƒê·¼ë¬´ (í¬íŠ¸ 8503)
  â””â”€â”€ /payroll â†’ ê¸‰ì—¬ê´€ë¦¬ (í¬íŠ¸ 8505)
```

### ì„¤ì • ë°©ë²•

#### 1. Nginx ì„¤ì¹˜ (Mac)
```bash
brew install nginx
```

#### 2. Nginx ì„¤ì • íŒŒì¼ ìƒì„±

**íŒŒì¼:** `/opt/homebrew/etc/nginx/nginx.conf` (ë˜ëŠ” `/usr/local/etc/nginx/nginx.conf`)

```nginx
http {
    # ì—…ìŠ¤íŠ¸ë¦¼ ì •ì˜
    upstream dashboard {
        server localhost:8000;
    }
    
    upstream maternity {
        server localhost:8501;
    }
    
    upstream remote_work {
        server localhost:8503;
    }
    
    upstream payroll {
        server localhost:8505;
    }
    
    server {
        listen 80;
        server_name localhost;  # ë˜ëŠ” homeserver.local
        
        # í†µí•© ëŒ€ì‹œë³´ë“œ (ë£¨íŠ¸)
        location / {
            proxy_pass http://dashboard;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # WebSocket ì§€ì› (Streamlit í•„ìˆ˜)
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_read_timeout 86400;
        }
        
        # ì¶œì‚°ìœ¡ì•„ ëª¨ë“ˆ
        location /maternity/ {
            rewrite ^/maternity/(.*)$ /$1 break;
            proxy_pass http://maternity;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
        }
        
        # ì¬íƒê·¼ë¬´ ëª¨ë“ˆ
        location /remote/ {
            rewrite ^/remote/(.*)$ /$1 break;
            proxy_pass http://remote_work;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
        }
        
        # ê¸‰ì—¬ê´€ë¦¬ ëª¨ë“ˆ
        location /payroll/ {
            rewrite ^/payroll/(.*)$ /$1 break;
            proxy_pass http://payroll;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
        }
    }
}
```

#### 3. Nginx ì‹œì‘
```bash
# ì„¤ì • í…ŒìŠ¤íŠ¸
sudo nginx -t

# Nginx ì‹œì‘
sudo nginx

# ë˜ëŠ” ì¬ì‹œì‘
sudo nginx -s reload
```

#### 4. ëª¨ë“ˆ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼:** `start_all_modules.sh`

```bash
#!/bin/bash

cd /Users/jangjiho/Documents/ì¸ì‚¬íŒ€_ìë™í™”_ë§ˆìŠ¤í„°

# ë°±ê·¸ë¼ìš´ë“œë¡œ ëª¨ë“  ëª¨ë“ˆ ì‹¤í–‰
cd 0_í†µí•©_ëŒ€ì‹œë³´ë“œ && streamlit run app.py --server.port 8000 > /tmp/dashboard.log 2>&1 &
cd ../1_ì¶œì‚°ìœ¡ì•„_ìë™í™” && streamlit run app.py --server.port 8501 > /tmp/maternity.log 2>&1 &
cd ../3_ì¬íƒê·¼ë¬´_ê´€ë¦¬ì‹œìŠ¤í…œ && streamlit run app.py --server.port 8503 > /tmp/remote.log 2>&1 &
cd ../5_ê¸‰ì—¬ê´€ë¦¬_ìë™í™” && streamlit run app.py --server.port 8505 > /tmp/payroll.log 2>&1 &

echo "âœ… ëª¨ë“  ëª¨ë“ˆì´ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤"
echo "ğŸ“ Nginxë¥¼ í†µí•´ ì ‘ì†: http://localhost"
```

#### 5. ì ‘ì†
```
http://localhost           â†’ í†µí•© ëŒ€ì‹œë³´ë“œ
http://localhost/maternity â†’ ì¶œì‚°ìœ¡ì•„
http://localhost/remote    â†’ ì¬íƒê·¼ë¬´
http://localhost/payroll   â†’ ê¸‰ì—¬ê´€ë¦¬
```

---

## ğŸ³ ë°©ì•ˆ 3: Docker Compose (ìµœê³  ì•ˆì •ì„±)

### ì¥ì 
- âœ… ì™„ì „í•œ ê²©ë¦¬ í™˜ê²½
- âœ… ìë™ ì¬ì‹œì‘
- âœ… ë¡œê·¸ ê´€ë¦¬ ìš©ì´
- âœ… ë°°í¬ ë° í™•ì¥ ê°„í¸
- âœ… í™ˆì„œë²„ì— ìµœì í™”

### ì„¤ì • íŒŒì¼

#### 1. `docker-compose.yml` (í”„ë¡œì íŠ¸ ë£¨íŠ¸)

```yaml
version: '3.8'

services:
  # í†µí•© ëŒ€ì‹œë³´ë“œ
  dashboard:
    build:
      context: .
      dockerfile: 0_í†µí•©_ëŒ€ì‹œë³´ë“œ/Dockerfile
    container_name: hr_dashboard
    ports:
      - "8000:8501"
    environment:
      - PYTHONPATH=/app
    volumes:
      - ./hr_master.db:/app/hr_master.db
      - ./shared:/app/shared:ro
    restart: always
    networks:
      - hr_network

  # ì¶œì‚°ìœ¡ì•„ ìë™í™”
  maternity:
    build:
      context: .
      dockerfile: 1_ì¶œì‚°ìœ¡ì•„_ìë™í™”/Dockerfile
    container_name: hr_maternity
    ports:
      - "8501:8501"
    environment:
      - PYTHONPATH=/app
    volumes:
      - ./hr_master.db:/app/hr_master.db
      - ./shared:/app/shared:ro
    restart: always
    networks:
      - hr_network

  # ì¬íƒê·¼ë¬´ ê´€ë¦¬
  remote_work:
    build:
      context: .
      dockerfile: 3_ì¬íƒê·¼ë¬´_ê´€ë¦¬ì‹œìŠ¤í…œ/Dockerfile
    container_name: hr_remote
    ports:
      - "8503:8501"
    environment:
      - PYTHONPATH=/app
    volumes:
      - ./hr_master.db:/app/hr_master.db
      - ./work_logs.db:/app/work_logs.db
      - ./shared:/app/shared:ro
    restart: always
    networks:
      - hr_network

  # ê¸‰ì—¬ê´€ë¦¬ ìë™í™”
  payroll:
    build:
      context: .
      dockerfile: 5_ê¸‰ì—¬ê´€ë¦¬_ìë™í™”/Dockerfile
    container_name: hr_payroll
    ports:
      - "8505:8501"
    environment:
      - PYTHONPATH=/app
    volumes:
      - ./hr_master.db:/app/hr_master.db
      - ./shared:/app/shared:ro
    restart: always
    networks:
      - hr_network

  # Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
  nginx:
    image: nginx:alpine
    container_name: hr_nginx
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/ssl:/etc/nginx/ssl:ro  # SSL ì¸ì¦ì„œ (ì„ íƒ)
    depends_on:
      - dashboard
      - maternity
      - remote_work
      - payroll
    restart: always
    networks:
      - hr_network

networks:
  hr_network:
    driver: bridge

volumes:
  db_data:
```

#### 2. ê° ëª¨ë“ˆì˜ Dockerfile (ì˜ˆì‹œ)

**íŒŒì¼:** `0_í†µí•©_ëŒ€ì‹œë³´ë“œ/Dockerfile`

```dockerfile
FROM python:3.9-slim

WORKDIR /app

# ì˜ì¡´ì„± ì„¤ì¹˜
COPY 0_í†µí•©_ëŒ€ì‹œë³´ë“œ/requirements.txt .
COPY shared/requirements.txt ./shared_requirements.txt
RUN pip install --no-cache-dir -r requirements.txt -r shared_requirements.txt

# ì•± íŒŒì¼ ë³µì‚¬
COPY 0_í†µí•©_ëŒ€ì‹œë³´ë“œ/ .
COPY shared/ ./shared/

# Streamlit í¬íŠ¸
EXPOSE 8501

# ì‹¤í–‰
CMD ["streamlit", "run", "app.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

#### 3. ì‹¤í–‰
```bash
# ë¹Œë“œ ë° ì‹œì‘
docker-compose up -d --build

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# ì¤‘ì§€
docker-compose down

# ì¬ì‹œì‘
docker-compose restart
```

---

## â“ FAQ

### Q1: ì–´ë–¤ ë°©ì•ˆì„ ì„ íƒí•´ì•¼ í•˜ë‚˜ìš”?

**ì¦‰ì‹œ ì‚¬ìš©:** ë°©ì•ˆ 1 (ê°œë³„ í¬íŠ¸)  
**í™ˆì„œë²„ ìš´ì˜:** ë°©ì•ˆ 2 (Nginx) ë˜ëŠ” ë°©ì•ˆ 3 (Docker)  
**ìµœê³  ì•ˆì •ì„±:** ë°©ì•ˆ 3 (Docker Compose)

### Q2: ë°ì´í„°ëŠ” ì–´ë–»ê²Œ ë™ê¸°í™”ë˜ë‚˜ìš”?

ëª¨ë“  ë°©ì•ˆì—ì„œ `hr_master.db` íŒŒì¼ì„ ê³µìœ í•˜ë¯€ë¡œ **ìë™ ë™ê¸°í™”**ë©ë‹ˆë‹¤!

### Q3: í™ˆì„œë²„ ì™¸ë¶€ ì ‘ì†ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?

1. **ë„ë©”ì¸ ì„¤ì •:** ê³µìœ ê¸°ì—ì„œ í¬íŠ¸ í¬ì›Œë”© (80 â†’ í™ˆì„œë²„ IP)
2. **DDNS ì„¤ì •:** No-IP, DuckDNS ë“± ì‚¬ìš©
3. **SSL ì¸ì¦ì„œ:** Let's Encrypt ë¬´ë£Œ ì¸ì¦ì„œ ì ìš©

### Q4: ìë™ ì‹œì‘ì€ ì–´ë–»ê²Œ ì„¤ì •í•˜ë‚˜ìš”?

**Mac (launchd):**
```bash
# ~/Library/LaunchAgents/com.hr.automation.plist ìƒì„±
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.hr.automation</string>
    <key>ProgramArguments</key>
    <array>
        <string>/Users/jangjiho/Documents/ì¸ì‚¬íŒ€_ìë™í™”_ë§ˆìŠ¤í„°/start_all_modules.sh</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
</dict>
</plist>

# ë¡œë“œ
launchctl load ~/Library/LaunchAgents/com.hr.automation.plist
```

**Docker:**
```yaml
# docker-compose.ymlì— ì´ë¯¸ í¬í•¨
restart: always
```

---

## ğŸ¯ ê¶Œì¥ ë¡œë“œë§µ

### ë‹¨ê³„ 1: ì¦‰ì‹œ ì•ˆì •í™” (ì˜¤ëŠ˜)
```bash
# ê°œë³„ í¬íŠ¸ë¡œ ì‹¤í–‰
./start_all_modules.sh
```

### ë‹¨ê³„ 2: Nginx ì„¤ì • (1-2ì¼)
- Nginx ì„¤ì¹˜ ë° ì„¤ì •
- ë‹¨ì¼ í¬íŠ¸ë¡œ í†µí•© ì ‘ê·¼

### ë‹¨ê³„ 3: Docker ë§ˆì´ê·¸ë ˆì´ì…˜ (ì„ íƒ, 1ì£¼)
- Dockerfile ì‘ì„±
- docker-compose.yml ì„¤ì •
- ìë™ ì¬ì‹œì‘ ë° ë¡œê·¸ ê´€ë¦¬

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Streamlit ë°°í¬ ê°€ì´ë“œ](https://docs.streamlit.io/knowledge-base/deploy)
- [Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ](https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/)
- [Docker Compose íŠœí† ë¦¬ì–¼](https://docs.docker.com/compose/)

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ë°©ì•ˆ ì„ íƒ ì™„ë£Œ
- [ ] ê°œë³„ ëª¨ë“ˆ ì •ìƒ ì‹¤í–‰ í™•ì¸
- [ ] Nginx ì„¤ì • (ë°©ì•ˆ 2 ì„ íƒ ì‹œ)
- [ ] Docker í™˜ê²½ êµ¬ì„± (ë°©ì•ˆ 3 ì„ íƒ ì‹œ)
- [ ] ìë™ ì‹œì‘ ì„¤ì •
- [ ] ì™¸ë¶€ ì ‘ì† ì„¤ì • (ì„ íƒ)
- [ ] SSL ì¸ì¦ì„œ ì ìš© (ì„ íƒ)

---

**ğŸ‰ í™ˆì„œë²„ ë°°í¬ ì„±ê³µì„ ê¸°ì›í•©ë‹ˆë‹¤!** ğŸš€
