# âœ… ë‚ ì§œ ì •ë³´ ì—°ë™ ì™„ë£Œ

**ì‘ì„±ì¼**: 2026ë…„ 1ì›” 28ì¼

---

## ğŸ” ë¬¸ì œ í™•ì¸

### ì¦ìƒ
- ğŸ“… ë‚ ì§œ ì •ë³´ ê´€ë¦¬ í˜ì´ì§€ì—ì„œ ì €ì¥í–ˆì§€ë§Œ
- âŒ ë©”ì¸ ì•±ì—ì„œ ë°˜ì˜ë˜ì§€ ì•ŠìŒ

### ì›ì¸
**ë‘ ê°œì˜ ë‹¤ë¥¸ ì €ì¥ì†Œë¥¼ ì‚¬ìš©**í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤:

1. **ë‚ ì§œ ì •ë³´ ê´€ë¦¬ í˜ì´ì§€**
   - `shared.database.update_employee()` ì‚¬ìš©
   - `hr_master.db` â†’ `employees.notes` í•„ë“œì— JSON ì €ì¥
   
2. **ë©”ì¸ ì•± (app.py)**
   - `shared_employee_manager` ì‚¬ìš©
   - DBì—ì„œ ì½ì–´ì˜¤ì§€ë§Œ `notes` í•„ë“œë¥¼ íŒŒì‹±í•˜ì§€ ì•ŠìŒ

**ê²°ê³¼**: ì €ì¥ì€ ë˜ì§€ë§Œ ì½ì–´ì˜¤ì§€ ëª»í•¨!

---

## âœ… í•´ê²° ë°©ë²•

### `shared_employee_manager.py` ìˆ˜ì •

**ë³€ê²½ ë‚´ìš©**: `_convert_to_json_format()` ë©”ì„œë“œ ê°œì„ 

#### Before (ì´ì „)
```python
"PREGNANCY_SHORT_WORK": {
    "ì‹œì‘ì¼": date.today() if db_data.get('is_pregnant') else None,
    "ì¢…ë£Œì¼": date.today() if db_data.get('is_pregnant') else None,
    # ê³ ì •ëœ ê¸°ë³¸ê°’ë§Œ ì‚¬ìš©
}
```

#### After (ê°œì„  í›„)
```python
# notes í•„ë“œì—ì„œ ë‚ ì§œ ì •ë³´ íŒŒì‹±
date_info = {}
if db_data.get('notes'):
    try:
        date_info = json.loads(db_data['notes'])
    except:
        pass

pregnancy_dates = date_info.get('pregnancy_dates', {})

"PREGNANCY_SHORT_WORK": {
    "ì‹œì‘ì¼": parse_date(pregnancy_dates.get('short_work_start')),
    "ì¢…ë£Œì¼": parse_date(pregnancy_dates.get('short_work_end')),
    # ì‹¤ì œ ì €ì¥ëœ ë‚ ì§œ ì‚¬ìš©!
}
```

---

## ğŸ”„ ë°ì´í„° íë¦„

### ì €ì¥ (ë‚ ì§œ ì •ë³´ ê´€ë¦¬ í˜ì´ì§€)

```
ì‚¬ìš©ì ì…ë ¥
    â†“
date_info = {
    'pregnancy_dates': {...},
    'maternity': {...},
    'parental_leave': {...},
    'replacement': {...}
}
    â†“
JSON.stringify(date_info)
    â†“
hr_master.db â†’ employees.notes
```

### ì½ê¸° (ë©”ì¸ ì•±)

```
hr_master.db â†’ employees í…Œì´ë¸”
    â†“
shared_employee_manager.get_employee()
    â†“
_convert_to_json_format()
    â†“ [NEW!]
JSON.parse(notes) â†’ date_info ì¶”ì¶œ
    â†“
ê¸°ì¡´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
    â†“
ë©”ì¸ ì•±ì—ì„œ ì‚¬ìš©
```

---

## ğŸ“Š ì—°ë™ë˜ëŠ” ì •ë³´

### 1. ì„ì‹  ë‹¨ì¶•ê·¼ë¬´
- âœ… ì‹œì‘ì¼ (`pregnancy_dates.short_work_start`)
- âœ… ì¢…ë£Œì¼ (`pregnancy_dates.short_work_end`)
- âœ… ê·¼ë¬´ ì‹œê°„ (`pregnancy_dates.work_start_time`, `work_end_time`)
- âœ… ì‹¤ê·¼ë¡œì‹œê°„ (`pregnancy_dates.work_hours`)

### 2. ì¶œì‚° ì •ë³´
- âœ… ì„ì‹ í™•ì¸ì¼ (`pregnancy_dates.confirmed`)
- âœ… ì¶œì‚°ì˜ˆì •ì¼ (`pregnancy_dates.expected_delivery`)
- âœ… ì¶œì‚°íœ´ê°€ ì‹œì‘ì¼ (`maternity.start`)
- âœ… ì¶œì‚°íœ´ê°€ ì¢…ë£Œì¼ (`maternity.end`)
- âœ… ì¶œì‚°íœ´ê°€ ì¼ìˆ˜ (`maternity.days`) â­ ìë™ ê³„ì‚°ë¨
- âœ… ë‹¤íƒœì•„ ì—¬ë¶€ (`maternity.is_multiple`)

### 3. ìœ¡ì•„ íœ´ì§
- âœ… ì‹œì‘ì¼ (`parental_leave.start`)
- âœ… ì¢…ë£Œì¼ (`parental_leave.end`)
- âœ… ê¸°ê°„ ê°œì›” (`parental_leave.months`) â­ ìë™ ê³„ì‚°ë¨
- âœ… ì´ ì¼ìˆ˜ (`parental_leave.days`) â­ ìë™ ê³„ì‚°ë¨

### 4. ëŒ€ì²´ì¸ë ¥
- âœ… ì±„ìš©ì¼ (`replacement.hire_date`)
- âœ… ì¸ìˆ˜ì¸ê³„ ì‹œì‘ì¼ (`replacement.handover_start`)
- âœ… ì¸ìˆ˜ì¸ê³„ ì¢…ë£Œì¼ (`replacement.handover_end`)
- âœ… ì¸ìˆ˜ì¸ê³„ ì¼ìˆ˜ (`replacement.handover_days`) â­ ìë™ ê³„ì‚°ë¨

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1ë‹¨ê³„: ë‚ ì§œ ì •ë³´ ì €ì¥

1. **ì¶œì‚°ìœ¡ì•„ ì•± ì ‘ì†**
   ```
   http://localhost:8501
   ```

2. **ì‚¬ì´ë“œë°” â†’ "ğŸ“… ë‚ ì§œ ì •ë³´ ê´€ë¦¬"**

3. **ì§ì› ì„ íƒ í›„ ë‚ ì§œ ì…ë ¥**
   - ë‹¨ì¶•ê·¼ë¬´: 2026-01-01 ~ 2026-03-31
   - ì¶œì‚°íœ´ê°€: 2026-04-01 ~ 2026-06-29
   - ìœ¡ì•„íœ´ì§: 2026-07-01 ~ 2027-06-30
   - ì¸ìˆ˜ì¸ê³„: 2026-06-01 ~ 2026-06-20

4. **ğŸ’¾ ì €ì¥ ë²„íŠ¼ í´ë¦­**
   ```
   âœ… XXXë‹˜ì˜ ë‚ ì§œ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!
   ```

### 2ë‹¨ê³„: ë©”ì¸ ì•±ì—ì„œ í™•ì¸

1. **ì‚¬ì´ë“œë°” â†’ "app" (ë©”ì¸ í˜ì´ì§€)**

2. **ë™ì¼í•œ ì§ì› ì„ íƒ**

3. **í™•ì¸ ì‚¬í•­**:
   - âœ… ì„ì‹  ë‹¨ì¶•ê·¼ë¬´ ì„¹ì…˜ì— ì…ë ¥í•œ ë‚ ì§œ í‘œì‹œ
   - âœ… ì¶œì‚°íœ´ê°€ ì„¹ì…˜ì— ì…ë ¥í•œ ë‚ ì§œ í‘œì‹œ
   - âœ… ìœ¡ì•„íœ´ì§ ì„¹ì…˜ì— ì…ë ¥í•œ ë‚ ì§œ í‘œì‹œ
   - âœ… ëŒ€ì²´ì¸ë ¥ ì„¹ì…˜ì— ì…ë ¥í•œ ë‚ ì§œ í‘œì‹œ

4. **"âœ… ì¬íƒê·¼ë¬´ ì¦ë¹™ ë¡œê·¸ ìƒì„±" í´ë¦­**
   - ì…ë ¥í•œ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ ë¡œê·¸ ìƒì„±ë¨!

5. **"ğŸ“„ ì •ë¶€ ì„œì‹ ìƒì„±" í´ë¦­**
   - ì…ë ¥í•œ ë‚ ì§œê°€ ì„œì‹ì— ë°˜ì˜ë¨!

---

## ğŸ’¡ ì‚¬ìš© ì˜ˆì‹œ

### ì‹œë‚˜ë¦¬ì˜¤: í™ê¸¸ë™ ì§ì›ì˜ ì¶œì‚°ìœ¡ì•„ ì§€ì›

#### 1ï¸âƒ£ ë‚ ì§œ ì •ë³´ ê´€ë¦¬ì—ì„œ ì…ë ¥
```
ì§ì›: í™ê¸¸ë™
ì„ì‹ í™•ì¸ì¼: 2025-12-01
ì¶œì‚°ì˜ˆì •ì¼: 2026-08-15
ë‹¨ì¶•ê·¼ë¬´: 2026-02-01 ~ 2026-08-14 (ìë™: 195ì¼)
ì¶œì‚°íœ´ê°€: 2026-08-01 ~ 2026-10-29 (ìë™: 90ì¼)
ìœ¡ì•„íœ´ì§: 2026-10-30 ~ 2027-10-29 (ìë™: 365ì¼, 12.2ê°œì›”)
```

#### 2ï¸âƒ£ ì €ì¥ í›„ ë©”ì¸ ì•±ì—ì„œ ìë™ ë°˜ì˜
```
âœ… ê·¼ë¬´ ë¡œê·¸ ìƒì„±
   - 2026-02-01ë¶€í„° ë‹¨ì¶•ê·¼ë¬´ ë¡œê·¸ ìë™ ìƒì„±
   - ì´ 195ì¼ ë¡œê·¸

âœ… ì •ë¶€ ì„œì‹
   - ì¶œì‚°ì „í›„íœ´ê°€ ê¸‰ì—¬ ì‹ ì²­ì„œ: 2026-08-01 ~ 10-29
   - ìœ¡ì•„íœ´ì§ ê¸‰ì—¬ ì‹ ì²­ì„œ: 2026-10-30 ~ 2027-10-29

âœ… ì§€ì›ê¸ˆ ê³„ì‚°
   - ì •í™•í•œ ë‚ ì§œ ê¸°ì¤€ ê³„ì‚°
```

---

## ğŸ”§ ê¸°ìˆ  êµ¬í˜„

### ë‚ ì§œ íŒŒì‹± í•¨ìˆ˜

```python
def parse_date(date_str):
    """ë¬¸ìì—´ â†’ date ê°ì²´ ë³€í™˜"""
    if date_str:
        try:
            return datetime.strptime(date_str, "%Y-%m-%d").date()
        except:
            pass
    return None
```

### notes í•„ë“œ êµ¬ì¡°

```json
{
  "pregnancy_dates": {
    "confirmed": "2025-12-01",
    "expected_delivery": "2026-08-15",
    "short_work_start": "2026-02-01",
    "short_work_end": "2026-08-14",
    "short_work_days": 195,
    "work_start_time": "10:00",
    "work_end_time": "18:00",
    "work_hours": 7
  },
  "maternity": {
    "start": "2026-08-01",
    "end": "2026-10-29",
    "actual_delivery": null,
    "days": 90,
    "is_multiple": false
  },
  "parental_leave": {
    "start": "2026-10-30",
    "end": "2027-10-29",
    "days": 365,
    "months": 12.2
  },
  "replacement": {
    "hire_date": null,
    "handover_start": "2026-06-01",
    "handover_end": "2026-06-20",
    "handover_days": 20
  }
}
```

---

## âœ¨ ê°œì„  íš¨ê³¼

### Before (ì´ì „)
```
âŒ ë‚ ì§œ ì •ë³´ ê´€ë¦¬ì—ì„œ ì €ì¥
âŒ ë©”ì¸ ì•±ì—ì„œ ë°˜ì˜ ì•ˆ ë¨
âŒ ìˆ˜ë™ìœ¼ë¡œ ë‹¤ì‹œ ì…ë ¥ í•„ìš”
âŒ ë°ì´í„° ë¶ˆì¼ì¹˜
```

### After (ê°œì„  í›„)
```
âœ… ë‚ ì§œ ì •ë³´ ê´€ë¦¬ì—ì„œ ì €ì¥
âœ… ë©”ì¸ ì•±ì—ì„œ ìë™ ë°˜ì˜
âœ… í•œ ë²ˆë§Œ ì…ë ¥
âœ… ëª¨ë“  ì•±ì—ì„œ ë™ì¼í•œ ë°ì´í„° ì‚¬ìš©
```

---

## ğŸŠ ì™„ë£Œ!

**ë‚ ì§œ ì •ë³´ê°€ ì™„ë²½í•˜ê²Œ ì—°ë™ë˜ì—ˆìŠµë‹ˆë‹¤!**

ì´ì œ:
- âœ… í•œ ê³³ì—ì„œ ì…ë ¥í•˜ë©´ ëª¨ë“  ê³³ì— ë°˜ì˜
- âœ… ìë™ ê³„ì‚°ëœ ì¼ìˆ˜ë„ ì €ì¥ë¨
- âœ… ë©”ì¸ ì•±ì—ì„œ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
- âœ… ì •ë¶€ ì„œì‹ì—ë„ ìë™ ë°˜ì˜

**í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê³  í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!** ğŸš€

---

**ì‘ì„±ì**: AI Assistant  
**ì™„ë£Œì¼**: 2026ë…„ 1ì›” 28ì¼
